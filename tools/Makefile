OBJ_GETINFO=getinfo.o
GETINFO_EXE=getinfo
GETINFO_EXE_RS=$(GETINFO_EXE).rs

OBJ_GETINFOPPC=getinfo_ppc.o template_68k.o
GETINFOPPC_EXE=getinfo_ppc
GETINFOPPC_EXE_RS=$(GETINFOPPC_EXE).rs

OBJ_TEMPLATE=template_68k.o template_ppc.o
TEMPLATE_EXE=template
TEMPLATE_EXE_RS=$(TEMPLATE_EXE).rs

OBJ_INITSONNET=InitSonnet.o
INITSONNET_EXE=InitSonnet
INITSONNET_EXE_RS=$(INITSONNET_EXE).rs

ASMPPCPARAM+=-I../sonnetlib

all: $(GETINFO_EXE) $(GETINFOPPC_EXE) $(TEMPLATE_EXE) $(INITSONNET_EXE)

disasm68k : $(GETINFO_EXE_RS) $(GETINFOPPC_EXE_RS) $(TEMPLATE_EXE_RS)

$(GETINFOPPC_EXE) : $(OBJ_GETINFOPPC)
	$(LD) -s $(OBJ_GETINFOPPC) -o $(GETINFOPPC_EXE)

$(GETINFO_EXE) : $(OBJ_GETINFO)
	$(LD) -s $(OBJ_GETINFO) -o $(GETINFO_EXE)

$(TEMPLATE_EXE) : $(OBJ_TEMPLATE)
	$(LD) -s $(OBJ_TEMPLATE) -o $(TEMPLATE_EXE)

$(INITSONNET_EXE) : $(OBJ_INITSONNET)
	$(LD) -s $(OBJ_INITSONNET) -o $(INITSONNET_EXE)

%.o : %.p $(LOCAL_INCS)
	$(ASMPPC) $(ASMPPCPARAM) -o $@ $< 

%.o : %.s $(LOCAL_INCS)
	$(ASM68K) $(ASM68KPARAM) -o $@ $<

%.rs : %
	$(IRA) $(IRAPARAM) $< $@

clean :
	$(RM) $(OBJ_GETINFO) $(GETINFO_EXE) $(GETINFO_EXE_RS) 
	$(RM) $(OBJ_GETINFOPPC) $(GETINFOPPC_EXE) $(GETINFOPPC_EXE_RS)
	$(RM) $(OBJ_TEMPLATE) $(TEMPLATE_EXE) $(TEMPLATE_EXE_RS) 
	$(RM) $(OBJ_INITSONNET) $(INITSONNET_EXE) $(INITSONNET_EXE_RS) 

